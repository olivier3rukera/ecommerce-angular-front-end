<div class="container page">
    <div *ngIf="loading" fxLayout="row" fxLayoutAlign="center center">
        <mat-spinner [diameter]="30"></mat-spinner>
    </div>
    <div *ngIf="resolved">
        <div *ngIf="products" class="pt-3">
            <app-bill [products]="products"></app-bill>
        </div>
        <h1 class="mat-h2">Adresse de livraison</h1>
        <div class="pt-2">
            <div [formGroup]="orderForm" fxLayout="column" fxLayoutAlign="space-around stretch">
                <mat-form-field appearance="outline">
                    <mat-label>Telephone</mat-label>
                    <input type="number" required matNativeControl formControlName="phone_number">
                </mat-form-field>
                <mat-form-field appearance="outline">
                    <mat-label>Ville</mat-label>
                    <input type="text" required matNativeControl formControlName="city" placeholder="Goma">
                </mat-form-field>
                <mat-form-field appearance="outline">
                    <mat-label>Quartier</mat-label>
                    <input type="text" required matNativeControl formControlName="street" placeholder="Des volcans">
                </mat-form-field>
                <mat-form-field appearance="outline">
                    <mat-label>Avenue</mat-label>
                    <input type="text" required matNativeControl formControlName="avenue">
                </mat-form-field>
                <mat-form-field appearance="outline">
                    <mat-label>Numero</mat-label>
                    <input type="text" required matNativeControl formControlName="number"
                        placeholder="Quartier Des volcans">
                </mat-form-field>
            </div>
        </div>
        <div class="pt-3">
            <div>
                <mat-radio-group [formControl]="paymentControl">
                    <div fxLayout="column" fxLayoutAlign="space-around start">
                        <mat-radio-button value="CARD">Carte bancaire</mat-radio-button>
                        <mat-radio-button value="COD">Cash Ã  la livraison</mat-radio-button>
                    </div>
                </mat-radio-group>
            </div>

            <div fxLayout="column" fxLayoutAlign="center strecht">
                <button [disabled]="loading || orderForm.invalid" class="btn btn-danger"
                    *ngIf="payment=='COD' && !singleItem" (click)="order()">Commander</button>
                <button [disabled]="loading || orderForm.invalid" class="btn btn-danger" (click)="orderSingleItem()"
                    *ngIf="payment=='COD' && singleItem">Commander</button>
                <button [disabled]="loading || orderForm.invalid" class="btn btn-danger" (click)="payWithRave()"
                    *ngIf="payment=='CARD'">Payer
                    maintenant</button>
            </div>
        </div>
    </div>
</div>
